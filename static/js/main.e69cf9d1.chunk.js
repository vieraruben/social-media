(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{10:function(e,t){e.exports={apiUrl:"https://rv-social-media.herokuapp.com"}},119:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(15),o=n.n(c),s=(n(119),n(17)),i=n(12),l=n(166),u=n(180),p=n(37),d=n(184),j=n(9),b=n.n(j),h=n(18),m=n(10),O=n.n(m),x=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/auth/signin/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/auth/signout/",{method:"GET"});case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),g={isAuthenticated:function(){return"undefined"!=typeof window&&(!!sessionStorage.getItem("jwt")&&JSON.parse(sessionStorage.getItem("jwt")))},authenticate:function(e,t){"undefined"!==typeof window&&sessionStorage.setItem("jwt",JSON.stringify(e)),t()},clearJWT:function(e){"undefined"!==typeof window&&sessionStorage.removeItem("jwt"),e(),f().then((function(e){document.cookie="t=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}))}},v=n(7),w=n(103),y=n(171),k=n(172),N=n(173),A=n(175),C=n(174),T=n(200),S=n(177),I=n(176),U=n(14),B=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/users/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/users/",{method:"GET",signal:t});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(h.a)(b.a.mark((function e(t,n,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/users/"+t.userId,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t}});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),E=function(){var e=Object(h.a)(b.a.mark((function e(t,n,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/users/"+t.userId,{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer "+n.t},body:r});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),P=function(){var e=Object(h.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/users/"+t.userId,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t}});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(h.a)(b.a.mark((function e(t,n,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/users/follow/",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t},body:JSON.stringify({userId:t.userId,followId:r})});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),z=function(){var e=Object(h.a)(b.a.mark((function e(t,n,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/users/unfollow/",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t},body:JSON.stringify({userId:t.userId,unfollowId:r})});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),J=function(){var e=Object(h.a)(b.a.mark((function e(t,n,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/users/findpeople/"+t.userId,{method:"GET",signal:r,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t}});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),W=n(199),H=n(90),L=n.n(H),R=n(195),G=n(2),M=Object(l.a)((function(e){return{root:e.mixins.gutters({padding:e.spacing(1),margin:0}),title:{margin:"".concat(e.spacing(3),"px ").concat(e.spacing(1),"px ").concat(e.spacing(2),"px"),color:e.palette.openTitle,fontSize:"1em"},avatar:{marginRight:e.spacing(1)},follow:{right:e.spacing(2)},snack:{color:e.palette.protectedTitle},viewButton:{verticalAlign:"middle"}}}));function K(){var e=M(),t=Object(r.useState)({users:[],open:!1,followMessage:""}),n=Object(i.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(""),s=Object(i.a)(o,2),l=s[0],u=s[1],d=g.isAuthenticated();Object(r.useEffect)((function(){var e=new AbortController,t=e.signal;return J({userId:d.user._id},{t:d.token},t).then((function(e){e&&e.error?console.log(e.error):c(Object(v.a)(Object(v.a)({},a),{},{users:e}))})),function(){e.abort()}}),[]);return Object(G.jsxs)("div",{children:[Object(G.jsxs)(w.a,{className:e.root,elevation:4,children:[Object(G.jsx)(p.a,{type:"title",className:e.title,children:"Whan to follow"}),Object(G.jsx)(R.a,{placeholder:"User name",onChange:function(e){return u(e.target.value)}}),Object(G.jsx)(y.a,{children:a.users.filter((function(e){return-1!=e.name.indexOf(l)})).map((function(t,n){return Object(G.jsx)("span",{children:Object(G.jsxs)(k.a,{children:[Object(G.jsx)(N.a,{className:e.avatar,children:Object(G.jsx)(T.a,{src:m.apiUrl+"/api/users/photo/"+t._id})}),Object(G.jsx)(C.a,{primary:t.name}),Object(G.jsxs)(A.a,{className:e.follow,children:[Object(G.jsx)(U.b,{to:"/user/"+t._id,children:Object(G.jsx)(I.a,{variant:"contained",color:"secondary",className:e.viewButton,children:Object(G.jsx)(L.a,{})})}),Object(G.jsx)(S.a,{"aria-label":"Follow",variant:"contained",color:"primary",onClick:function(){var e,r;e=t,r=n,D({userId:d.user._id},{t:d.token},e._id).then((function(t){if(t.error)console.log(t.error);else{var n=a.users;n.splice(r,1),c(Object(v.a)(Object(v.a)({},a),{},{users:n,open:!0,followMessage:"Following ".concat(e.name,"!")}))}}))},children:"Follow"})]})]})},n)}))})]}),Object(G.jsx)(W.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:a.open,onClose:function(e,t){c(Object(v.a)(Object(v.a)({},a),{},{open:!1}))},autoHideDuration:6e3,message:Object(G.jsx)("span",{className:e.snack,children:a.followMessage})})]})}var q=n(78),Q=n(183),V=n(179),X=n(181),Y=n(182),Z=n(71),$=n.n(Z),ee=n(91),te=n.n(ee),ne=n(92),re=n.n(ne),ae=n(93),ce=n.n(ae),oe=function(){var e=Object(h.a)(b.a.mark((function e(t,n,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/posts/new/"+t.userId,{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer "+n.t},body:r});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),se=function(){var e=Object(h.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/posts/by/"+t.userId,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t}});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(h.a)(b.a.mark((function e(t,n,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/posts/feed/"+t.userId,{method:"GET",signal:r,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t}});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),le=function(){var e=Object(h.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/posts/"+t.postId,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t}});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(h.a)(b.a.mark((function e(t,n,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/posts/like/",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t},body:JSON.stringify({userId:t.userId,postId:r})});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),pe=function(){var e=Object(h.a)(b.a.mark((function e(t,n,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/posts/unlike/",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t},body:JSON.stringify({userId:t.userId,postId:r})});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),de=function(){var e=Object(h.a)(b.a.mark((function e(t,n,r,a){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/posts/comment/",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t},body:JSON.stringify({userId:t.userId,postId:r,comment:a})});case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),je=function(){var e=Object(h.a)(b.a.mark((function e(t,n,r,a){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.a.apiUrl+"/api/posts/uncomment/",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t},body:JSON.stringify({userId:t.userId,postId:r,comment:a})});case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),be=n(178),he=Object(l.a)((function(e){return{cardHeader:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},smallAvatar:{width:25,height:25},commentField:{width:"96%"},commentText:{backgroundColor:"white",padding:e.spacing(1),margin:"2px ".concat(e.spacing(2),"px 2px 2px")},commentDate:{display:"block",color:"gray",fontSize:"0.8em"},commentDelete:{fontSize:"1.6em",verticalAlign:"middle",cursor:"pointer"}}}));function me(e){var t=he(),n=Object(r.useState)(""),a=Object(i.a)(n,2),c=a[0],o=a[1],s=g.isAuthenticated(),l=function(n){return Object(G.jsxs)("p",{className:t.commentText,children:[Object(G.jsx)(U.b,{to:"/user/"+n.postedBy._id,children:n.postedBy.name}),Object(G.jsx)("br",{}),n.text,Object(G.jsxs)("span",{className:t.commentDate,children:[new Date(n.created).toDateString()," |",g.isAuthenticated().user._id===n.postedBy._id&&Object(G.jsx)(be.a,{onClick:(r=n,function(t){je({userId:s.user._id},{t:s.token},e.postId,r).then((function(t){t.error?console.log(t.error):e.updateComments(t.comments)}))}),className:t.commentDelete,children:"delete"})]})]});var r};return Object(G.jsxs)("div",{children:[Object(G.jsx)(V.a,{avatar:Object(G.jsx)(T.a,{className:t.smallAvatar,src:m.apiUrl+"/api/users/photo/"+g.isAuthenticated().user._id}),title:Object(G.jsx)(R.a,{onKeyDown:function(t){13==t.keyCode&&t.target.value&&(t.preventDefault(),de({userId:s.user._id},{t:s.token},e.postId,{text:c}).then((function(t){t.error?console.log(t.error):(o(""),e.updateComments(t.comments))})))},multiline:!0,value:c,onChange:function(e){o(e.target.value)},placeholder:"Write something ...",className:t.commentField,margin:"normal"}),className:t.cardHeader}),e.comments.map((function(e,n){return Object(G.jsx)(V.a,{avatar:Object(G.jsx)(T.a,{className:t.smallAvatar,src:m.apiUrl+"/api/users/photo/"+e.postedBy._id}),title:l(e),className:t.cardHeader},n)}))]})}var Oe=Object(l.a)((function(e){return{card:{maxWidth:600,margin:"auto",marginBottom:e.spacing(3),backgroundColor:"rgba(0, 0, 0, 0.06)"},cardContent:{backgroundColor:"white",padding:"".concat(e.spacing(2),"px 0px")},cardHeader:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},text:{margin:e.spacing(2)},photo:{textAlign:"center",backgroundColor:"#f2f5f4",padding:e.spacing(1)},media:{height:200},button:{margin:e.spacing(1)}}}));function xe(e){var t=Oe(),n=g.isAuthenticated(),a=function(e){return-1!==e.indexOf(n.user._id)},c=Object(r.useState)({like:a(e.post.likes),likes:e.post.likes.length,comments:e.post.comments}),o=Object(i.a)(c,2),s=o[0],l=o[1];Object(r.useEffect)((function(){l(Object(v.a)(Object(v.a)({},s),{},{like:a(e.post.likes),likes:e.post.likes.length,comments:e.post.comments}))}),[]);var d=function(){(s.like?pe:ue)({userId:n.user._id},{t:n.token},e.post._id).then((function(e){e.error?console.log(e.error):l(Object(v.a)(Object(v.a)({},s),{},{like:!s.like,likes:e.likes.length}))}))};return Object(G.jsxs)(u.a,{className:t.card,children:[Object(G.jsx)(V.a,{avatar:Object(G.jsx)(T.a,{src:m.apiUrl+"/api/users/photo/"+e.post.postedBy._id}),action:e.post.postedBy._id===g.isAuthenticated().user._id&&Object(G.jsx)(I.a,{onClick:function(){le({postId:e.post._id},{t:n.token}).then((function(t){t.error?console.log(t.error):e.onRemove(e.post)}))},children:Object(G.jsx)($.a,{})}),title:Object(G.jsx)(U.b,{to:"/user/"+e.post.postedBy._id,children:e.post.postedBy.name}),subheader:new Date(e.post.created).toDateString(),className:t.cardHeader}),Object(G.jsxs)(X.a,{className:t.cardContent,children:[Object(G.jsx)(p.a,{component:"p",className:t.text,children:e.post.text}),e.post.photo&&Object(G.jsx)("div",{className:t.photo,children:Object(G.jsx)("img",{className:t.media,src:m.apiUrl+"/api/posts/photo/"+e.post._id})})]}),Object(G.jsxs)(Y.a,{children:[s.like?Object(G.jsx)(I.a,{onClick:d,className:t.button,"aria-label":"Like",color:"secondary",children:Object(G.jsx)(te.a,{})}):Object(G.jsx)(I.a,{onClick:d,className:t.button,"aria-label":"Unlike",color:"secondary",children:Object(G.jsx)(re.a,{})})," ",Object(G.jsx)("span",{children:s.likes}),Object(G.jsx)(I.a,{className:t.button,"aria-label":"Comment",color:"secondary",children:Object(G.jsx)(ce.a,{})})," ",Object(G.jsx)("span",{children:s.comments.length})]}),Object(G.jsx)(Q.a,{}),Object(G.jsx)(me,{postId:e.post._id,comments:s.comments,updateComments:function(e){l(Object(v.a)(Object(v.a)({},s),{},{comments:e}))}})]})}function fe(e){return Object(G.jsx)("div",{style:{marginTop:"24px"},children:e.posts.map((function(t,n){return Object(G.jsx)(xe,{post:t,onRemove:e.removeUpdate},n)}))})}var ge=n(33),ve=n(94),we=n.n(ve),ye=Object(l.a)((function(e){return{root:{backgroundColor:"#efefef",padding:"".concat(e.spacing(3),"px 0px 1px")},card:{maxWidth:600,margin:"auto",marginBottom:e.spacing(3),backgroundColor:"rgba(65, 150, 136, 0.09)",boxShadow:"none"},cardContent:{backgroundColor:"white",paddingTop:0,paddingBottom:0},cardHeader:{paddingTop:8,paddingBottom:8},photoButton:{height:30,marginBottom:5},input:{display:"none"},textField:{marginLeft:e.spacing(2),marginRight:e.spacing(2),width:"90%"},submit:{margin:e.spacing(2)},filename:{verticalAlign:"super"}}}));function ke(e){var t=ye(),n=Object(r.useState)({text:"",photo:"",error:"",user:{}}),a=Object(i.a)(n,2),c=a[0],o=a[1],s=g.isAuthenticated();Object(r.useEffect)((function(){o(Object(v.a)(Object(v.a)({},c),{},{user:g.isAuthenticated().user}))}),[]);var l=function(e){return function(t){var n="photo"===e?t.target.files[0]:t.target.value;o(Object(v.a)(Object(v.a)({},c),{},Object(ge.a)({},e,n)))}},d=c.user._id?m.apiUrl+"/api/users/photo/"+c.user._id:m.apiUrl+"/api/users/defaultphoto";return Object(G.jsx)("div",{className:t.root,children:Object(G.jsxs)(u.a,{className:t.card,children:[Object(G.jsx)(V.a,{avatar:Object(G.jsx)(T.a,{src:d}),title:c.user.name,className:t.cardHeader}),Object(G.jsxs)(X.a,{className:t.cardContent,children:[Object(G.jsx)(R.a,{placeholder:"Share your thoughts ...",multiline:!0,rows:"3",value:c.text,onChange:l("text"),className:t.textField,margin:"normal"}),Object(G.jsx)("input",{accept:"image/*",onChange:l("photo"),className:t.input,id:"icon-button-file",type:"file"}),Object(G.jsx)("label",{htmlFor:"icon-button-file",children:Object(G.jsx)(I.a,{color:"secondary",className:t.photoButton,component:"span",children:Object(G.jsx)(we.a,{})})})," ",Object(G.jsx)("span",{className:t.filename,children:c.photo?c.photo.name:""}),c.error&&Object(G.jsxs)(p.a,{component:"p",color:"error",children:[Object(G.jsx)(be.a,{color:"error",className:t.error,children:"error"}),c.error]})]}),Object(G.jsx)(Y.a,{children:Object(G.jsx)(S.a,{color:"primary",variant:"contained",disabled:""===c.text,onClick:function(){var t=new FormData;t.append("text",c.text),t.append("photo",c.photo),oe({userId:s.user._id},{t:s.token},t).then((function(t){t.error?o(Object(v.a)(Object(v.a)({},c),{},{error:t.error})):(o(Object(v.a)(Object(v.a)({},c),{},{text:"",photo:""})),e.addUpdate(t))}))},className:t.submit,children:"POST"})})]})})}var Ne=Object(l.a)((function(e){return{card:{margin:"auto",paddingTop:0,paddingBottom:e.spacing(3)},title:{padding:"".concat(e.spacing(3),"px ").concat(e.spacing(2.5),"px ").concat(e.spacing(2),"px"),color:e.palette.openTitle,fontSize:"1em"},media:{minHeight:330}}}));function Ae(){var e=Ne(),t=Object(r.useState)([]),n=Object(i.a)(t,2),a=n[0],c=n[1],o=g.isAuthenticated();Object(r.useEffect)((function(){var e=new AbortController,t=e.signal;return ie({userId:o.user._id},{t:o.token},t).then((function(e){e.error?console.log(e.error):c(e)})),function(){e.abort()}}),[]);return Object(G.jsxs)(u.a,{className:e.card,children:[Object(G.jsx)(p.a,{type:"title",className:e.title,children:"Newsfeed"}),Object(G.jsx)(Q.a,{}),Object(G.jsx)(ke,{addUpdate:function(e){var t=Object(q.a)(a);t.unshift(e),c(t)}}),Object(G.jsx)(Q.a,{}),Object(G.jsx)(fe,{removeUpdate:function(e){var t=Object(q.a)(a),n=t.indexOf(e);t.splice(n,1),c(t)},posts:a})]})}var Ce=Object(l.a)((function(e){return{root:{flexGrow:1,margin:30},card:{maxWidth:600,margin:"auto",marginTop:e.spacing(5),marginBottom:e.spacing(5)},title:{padding:"".concat(e.spacing(3),"px ").concat(e.spacing(2.5),"px ").concat(e.spacing(2),"px"),color:e.palette.text.secondary,textAlign:"center"},media:{minHeight:400},credit:{padding:10,textAlign:"right",backgroundColor:"#ededed",borderBottom:"1px solid #d0d0d0","& a":{color:"#3f4771"}}}}));function Te(e){var t=e.history,n=Ce(),a=Object(r.useState)(!1),c=Object(i.a)(a,2),o=c[0],s=c[1];return Object(r.useEffect)((function(){s(g.isAuthenticated());var e=t.listen((function(){s(g.isAuthenticated())}));return function(){e()}}),[]),Object(G.jsxs)("div",{className:n.root,children:[!o&&Object(G.jsx)(d.a,{container:!0,spacing:8,children:Object(G.jsx)(d.a,{item:!0,xs:12,children:Object(G.jsx)(u.a,{className:n.card,children:Object(G.jsx)(p.a,{variant:"h6",className:n.title,children:"Welcome"})})})}),o&&Object(G.jsxs)(d.a,{container:!0,spacing:8,children:[Object(G.jsx)(d.a,{item:!0,xs:8,sm:7,children:Object(G.jsx)(Ae,{})}),Object(G.jsx)(d.a,{item:!0,xs:6,sm:5,children:Object(G.jsx)(K,{})})]})]})}var Se=n(96),Ie=n.n(Se),Ue=n(95),Be=n.n(Ue),_e=Object(l.a)((function(e){return{root:e.mixins.gutters({padding:e.spacing(1),margin:e.spacing(5)}),title:{margin:"".concat(e.spacing(4),"px 0 ").concat(e.spacing(2),"px"),color:e.palette.openTitle}}}));function Fe(){var e=_e(),t=Object(r.useState)([]),n=Object(i.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(""),s=Object(i.a)(o,2),l=s[0],u=s[1];return Object(r.useEffect)((function(){var e=new AbortController,t=e.signal;return _(t).then((function(e){if(e&&e.error)console.log(e.error);else{var t=e.filter((function(e){return e._id!=g.isAuthenticated().user._id}));c(t)}})),function(){e.abort()}}),[]),Object(G.jsxs)(w.a,{className:e.root,elevation:4,children:[Object(G.jsx)(p.a,{variant:"h6",className:e.title,children:"All Users"}),Object(G.jsx)(R.a,{placeholder:"Search for user name",onChange:function(e){return u(e.target.value)}}),Object(G.jsx)(y.a,{dense:!0,children:a.filter((function(e){return-1!=e.name.indexOf(l)})).map((function(e,t){return Object(G.jsx)(U.b,{to:"/user/"+e._id,children:Object(G.jsxs)(k.a,{button:!0,children:[Object(G.jsx)(N.a,{children:Object(G.jsx)(T.a,{src:"".concat(m.apiUrl,"/api/users/photo/").concat(e._id),children:Object(G.jsx)(Be.a,{})})}),Object(G.jsx)(C.a,{primary:e.name}),Object(G.jsx)(A.a,{children:Object(G.jsx)(I.a,{children:Object(G.jsx)(Ie.a,{})})})]})},t)}))})]})}var Ee=n(198),Pe=n(188),De=n(186),ze=n(187),Je=n(185),We=Object(l.a)((function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:e.spacing(5),paddingBottom:e.spacing(2)},error:{verticalAlign:"middle"},title:{marginTop:e.spacing(2),color:e.palette.openTitle},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},submit:{margin:"auto",marginBottom:e.spacing(2)}}}));function He(){var e=We(),t=Object(r.useState)({name:"",password:"",email:"",open:!1,error:""}),n=Object(i.a)(t,2),a=n[0],c=n[1],o=function(e){return function(t){c(Object(v.a)(Object(v.a)({},a),{},Object(ge.a)({},e,t.target.value)))}};return Object(G.jsxs)("div",{children:[Object(G.jsxs)(u.a,{className:e.card,children:[Object(G.jsxs)(X.a,{children:[Object(G.jsx)(p.a,{variant:"h6",className:e.title,children:"Sign Up"}),Object(G.jsx)(R.a,{id:"name",label:"Name",className:e.textField,value:a.name,onChange:o("name"),margin:"normal"}),Object(G.jsx)("br",{}),Object(G.jsx)(R.a,{id:"email",type:"email",label:"Email",className:e.textField,value:a.email,onChange:o("email"),margin:"normal"}),Object(G.jsx)("br",{}),Object(G.jsx)(R.a,{id:"password",type:"password",label:"Password",className:e.textField,value:a.password,onChange:o("password"),margin:"normal"}),Object(G.jsx)("br",{})," ",a.error&&Object(G.jsxs)(p.a,{component:"p",color:"error",children:[Object(G.jsx)(be.a,{color:"error",className:e.error,children:"error"}),a.error]})]}),Object(G.jsx)(Y.a,{children:Object(G.jsx)(S.a,{color:"primary",variant:"contained",onClick:function(){var e={name:a.name||void 0,email:a.email||void 0,password:a.password||void 0};B(e).then((function(e){e.error?c(Object(v.a)(Object(v.a)({},a),{},{error:e.error})):c(Object(v.a)(Object(v.a)({},a),{},{error:"",open:!0}))}))},className:e.submit,children:"Submit"})})]}),Object(G.jsxs)(Ee.a,{open:a.open,disableBackdropClick:!0,children:[Object(G.jsx)(Je.a,{children:"New Account"}),Object(G.jsx)(De.a,{children:Object(G.jsx)(ze.a,{children:"New account successfully created."})}),Object(G.jsx)(Pe.a,{children:Object(G.jsx)(U.b,{to:"/signin",children:Object(G.jsx)(S.a,{color:"primary",autoFocus:"autoFocus",variant:"contained",children:"Sign In"})})})]})]})}var Le=Object(l.a)((function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:e.spacing(5),paddingBottom:e.spacing(2)},error:{verticalAlign:"middle"},title:{marginTop:e.spacing(2),color:e.palette.openTitle},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},submit:{margin:"auto",marginBottom:e.spacing(2)}}}));function Re(e){var t=Le(),n=Object(r.useState)({email:"",password:"",error:"",redirectToReferrer:!1}),a=Object(i.a)(n,2),c=a[0],o=a[1],l=function(e){return function(t){o(Object(v.a)(Object(v.a)({},c),{},Object(ge.a)({},e,t.target.value)))}},d=(e.location.state||{from:{pathname:"/"}}).from;return c.redirectToReferrer?Object(G.jsx)(s.a,{to:d}):Object(G.jsxs)(u.a,{className:t.card,children:[Object(G.jsxs)(X.a,{children:[Object(G.jsx)(p.a,{variant:"h6",className:t.title,children:"Sign In"}),Object(G.jsx)(R.a,{id:"email",type:"email",label:"Email",className:t.textField,value:c.email,onChange:l("email"),margin:"normal"}),Object(G.jsx)("br",{}),Object(G.jsx)(R.a,{id:"password",type:"password",label:"Password",className:t.textField,value:c.password,onChange:l("password"),margin:"normal"}),Object(G.jsx)("br",{})," ",c.error&&Object(G.jsx)(p.a,{component:"p",color:"error",children:c.error})]}),Object(G.jsx)(Y.a,{children:Object(G.jsx)(S.a,{color:"primary",variant:"contained",onClick:function(){var e={email:c.email||void 0,password:c.password||void 0};x(e).then((function(e){e.error?o(Object(v.a)(Object(v.a)({},c),{},{error:e.error})):g.authenticate(e,(function(){o(Object(v.a)(Object(v.a)({},c),{},{error:"",redirectToReferrer:!0}))}))}))},className:t.submit,children:"Submit"})})]})}var Ge=n(97),Me=n.n(Ge),Ke=Object(l.a)((function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:e.spacing(5),paddingBottom:e.spacing(2)},title:{margin:e.spacing(2),color:e.palette.protectedTitle},error:{verticalAlign:"middle"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},submit:{margin:"auto",marginBottom:e.spacing(2)},bigAvatar:{width:60,height:60,margin:"auto"},input:{display:"none"},filename:{marginLeft:"10px"}}}));function qe(e){var t=e.match,n=Ke(),a=Object(r.useState)({name:"",about:"",photo:"",email:"",password:"",redirectToProfile:!1,error:"",id:""}),c=Object(i.a)(a,2),o=c[0],l=c[1],d=g.isAuthenticated();Object(r.useEffect)((function(){var e=new AbortController,n=e.signal;return F({userId:t.params.userId},{t:d.token},n).then((function(e){e&e.error?l(Object(v.a)(Object(v.a)({},o),{},{error:e.error})):l(Object(v.a)(Object(v.a)({},o),{},{id:e._id,name:e.name,email:e.email,about:e.about}))})),function(){e.abort()}}),[t.params.userId]);var j=function(e){return function(t){var n="photo"===e?t.target.files[0]:t.target.value;l(Object(v.a)(Object(v.a)({},o),{},Object(ge.a)({},e,n)))}},b=o.id?"/api/users/photo/".concat(o.id,"?").concat((new Date).getTime()):"/api/users/defaultphoto";return o.redirectToProfile?Object(G.jsx)(s.a,{to:"/user/"+o.id}):Object(G.jsxs)(u.a,{className:n.card,children:[Object(G.jsxs)(X.a,{children:[Object(G.jsx)(p.a,{variant:"h6",className:n.title,children:"Edit Profile"}),Object(G.jsx)(T.a,{src:b,className:n.bigAvatar}),Object(G.jsx)("br",{}),Object(G.jsx)("input",{accept:"image/*",onChange:j("photo"),className:n.input,id:"icon-button-file",type:"file"}),Object(G.jsx)("label",{htmlFor:"icon-button-file",children:Object(G.jsxs)(S.a,{variant:"contained",color:"default",component:"span",children:["Upload",Object(G.jsx)(Me.a,{})]})})," ",Object(G.jsx)("span",{className:n.filename,children:o.photo?o.photo.name:""}),Object(G.jsx)("br",{}),Object(G.jsx)(R.a,{id:"name",label:"Name",className:n.textField,value:o.name,onChange:j("name"),margin:"normal"}),Object(G.jsx)("br",{}),Object(G.jsx)(R.a,{id:"multiline-flexible",label:"About",multiline:!0,rows:"2",value:o.about,onChange:j("about"),className:n.textField,margin:"normal"}),Object(G.jsx)("br",{}),Object(G.jsx)(R.a,{id:"email",type:"email",label:"Email",className:n.textField,value:o.email,onChange:j("email"),margin:"normal"}),Object(G.jsx)("br",{}),Object(G.jsx)(R.a,{id:"password",type:"password",label:"Password",className:n.textField,value:o.password,onChange:j("password"),margin:"normal"}),Object(G.jsx)("br",{})," ",o.error&&Object(G.jsxs)(p.a,{component:"p",color:"error",children:[Object(G.jsx)(be.a,{color:"error",className:n.error,children:"error"}),o.error]})]}),Object(G.jsx)(Y.a,{children:Object(G.jsx)(S.a,{color:"primary",variant:"contained",onClick:function(){var e=new FormData;o.name&&e.append("name",o.name),o.email&&e.append("email",o.email),o.passoword&&e.append("passoword",o.passoword),o.about&&e.append("about",o.about),o.photo&&e.append("photo",o.photo),E({userId:t.params.userId},{t:d.token},e).then((function(e){e&&e.error?l(Object(v.a)(Object(v.a)({},o),{},{error:e.error})):l(Object(v.a)(Object(v.a)({},o),{},{redirectToProfile:!0}))}))},className:n.submit,children:"Submit"})})]})}var Qe=n(98),Ve=n.n(Qe);function Xe(e){var t=Object(r.useState)(!1),n=Object(i.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(!1),l=Object(i.a)(o,2),u=l[0],p=l[1],d=g.isAuthenticated(),j=function(){c(!1)};return u?Object(G.jsx)(s.a,{to:"/"}):Object(G.jsxs)("span",{children:[Object(G.jsx)(I.a,{"aria-label":"Delete",onClick:function(){c(!0)},color:"secondary",children:Object(G.jsx)($.a,{})}),Object(G.jsxs)(Ee.a,{open:a,onClose:j,children:[Object(G.jsx)(Je.a,{children:"Delete Account"}),Object(G.jsx)(De.a,{children:Object(G.jsx)(ze.a,{children:"Confirm to delete your account."})}),Object(G.jsxs)(Pe.a,{children:[Object(G.jsx)(S.a,{onClick:j,color:"primary",children:"Cancel"}),Object(G.jsx)(S.a,{onClick:function(){P({userId:e.userId},{t:d.token}).then((function(e){e&&e.error?console.log(e.error):(g.clearJWT((function(){return console.log("deleted")})),p(!0))}))},color:"secondary",autoFocus:"autoFocus",children:"Confirm"})]})]})]})}function Ye(e){return Object(G.jsx)("div",{children:e.following?Object(G.jsx)(S.a,{variant:"contained",color:"secondary",onClick:function(){e.onButtonClick(z)},children:"Unfollow"}):Object(G.jsx)(S.a,{variant:"contained",color:"primary",onClick:function(){e.onButtonClick(D)},children:"Follow"})})}var Ze=n(191),$e=n(196),et=n(192),tt=n(189),nt=n(190),rt=Object(l.a)((function(e){return{root:{paddingTop:e.spacing(2),display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",background:e.palette.background.paper},bigAvatar:{width:60,height:60,margin:"auto"},gridList:{width:500,height:220},tileText:{textAlign:"center",marginTop:10}}}));function at(e){var t=rt();return Object(G.jsx)("div",{className:t.root,children:Object(G.jsx)(tt.a,{cellHeight:160,className:t.gridList,cols:4,children:e.people.map((function(e,n){return Object(G.jsx)(nt.a,{style:{height:120},children:Object(G.jsxs)(U.b,{to:"/user/"+e._id,children:[Object(G.jsx)(T.a,{src:"/api/users/photo/"+e._id,className:t.bigAvatar}),Object(G.jsx)(p.a,{className:t.tileText,children:e.name})]})},n)}))})})}function ct(e){var t=Object(r.useState)(0),n=Object(i.a)(t,2),a=n[0],c=n[1];return Object(G.jsxs)("div",{children:[Object(G.jsx)(Ze.a,{position:"static",color:"default",children:Object(G.jsxs)($e.a,{value:a,onChange:function(e,t){c(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth",children:[Object(G.jsx)(et.a,{label:"Posts"}),Object(G.jsx)(et.a,{label:"Following"}),Object(G.jsx)(et.a,{label:"Followers"})]})}),0===a&&Object(G.jsx)(ot,{children:Object(G.jsx)(fe,{removeUpdate:e.removePostUpdate,posts:e.posts})}),1===a&&Object(G.jsx)(ot,{children:Object(G.jsx)(at,{people:e.user.following})}),2===a&&Object(G.jsx)(ot,{children:Object(G.jsx)(at,{people:e.user.followers})})]})}var ot=function(e){return Object(G.jsx)(p.a,{component:"div",style:{padding:16},children:e.children})},st=Object(l.a)((function(e){return{root:e.mixins.gutters({maxWidth:600,margin:"auto",padding:e.spacing(3),marginTop:e.spacing(5)}),title:{margin:"".concat(e.spacing(2),"px ").concat(e.spacing(1),"px 0"),color:e.palette.protectedTitle,fontSize:"1em"},bigAvatar:{width:60,height:60,margin:10}}}));function it(e){var t=e.match,n=st(),a=Object(r.useState)({user:{following:[],followers:[]},redirectToSignin:!1,following:!1}),c=Object(i.a)(a,2),o=c[0],l=c[1],u=Object(r.useState)([]),d=Object(i.a)(u,2),j=d[0],b=d[1],h=g.isAuthenticated();Object(r.useEffect)((function(){var e=new AbortController,n=e.signal;return F({userId:t.params.userId},{t:h.token},n).then((function(e){if(e&&e.error)l(Object(v.a)(Object(v.a)({},o),{},{redirectToSignin:!0}));else{var t=O(e);l(Object(v.a)(Object(v.a)({},o),{},{user:e,following:t})),x(e._id)}})),function(){e.abort()}}),[t.params.userId]);var O=function(e){return e.followers.some((function(e){return e._id==h.user._id}))},x=function(e){se({userId:e},{t:h.token}).then((function(e){e.error?console.log(e.error):b(e)}))},f=o.user._id?"".concat(m.apiUrl,"/api/users/photo/").concat(o.user._id,"?").concat((new Date).getTime()):m.apiUrl+"/api/users/defaultphoto";return o.redirectToSignin?Object(G.jsx)(s.a,{to:"/signin"}):Object(G.jsxs)(w.a,{className:n.root,elevation:4,children:[Object(G.jsx)(p.a,{variant:"h6",className:n.title,children:"Profile"}),Object(G.jsxs)(y.a,{dense:!0,children:[Object(G.jsxs)(k.a,{children:[Object(G.jsx)(N.a,{children:Object(G.jsx)(T.a,{src:f,className:n.bigAvatar})}),Object(G.jsx)(C.a,{primary:o.user.name,secondary:o.user.email})," ",g.isAuthenticated().user&&g.isAuthenticated().user._id==o.user._id?Object(G.jsxs)(A.a,{children:[Object(G.jsx)(U.b,{to:"/user/edit/"+o.user._id,children:Object(G.jsx)(I.a,{"aria-label":"Edit",color:"primary",children:Object(G.jsx)(Ve.a,{})})}),Object(G.jsx)(Xe,{userId:o.user._id})]}):Object(G.jsx)(Ye,{following:o.following,onButtonClick:function(e){e({userId:h.user._id},{t:h.token},o.user._id).then((function(e){e.error?l(Object(v.a)(Object(v.a)({},o),{},{error:e.error})):l(Object(v.a)(Object(v.a)({},o),{},{user:e,following:!o.following}))}))}})]}),Object(G.jsx)(Q.a,{}),Object(G.jsx)(k.a,{children:Object(G.jsx)(C.a,{primary:o.user.about,secondary:"Joined: "+new Date(o.user.created).toDateString()})})]}),Object(G.jsx)(ct,{user:o.user,posts:j,removePostUpdate:function(e){console.log("post "+JSON.stringify(e));var t=j.filter((function(t){return t._id!=e._id}));b(t)}})]})}var lt=n(101),ut=function(e){var t=e.component,n=Object(lt.a)(e,["component"]);return Object(G.jsx)(s.b,Object(v.a)(Object(v.a)({},n),{},{render:function(e){return g.isAuthenticated()?Object(G.jsx)(t,Object(v.a)({},e)):Object(G.jsx)(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},pt=n(193),dt=n(99),jt=n.n(dt),bt=function(e,t){return e.location.pathname==t?{color:"#ffa726"}:{color:"#ffffff"}},ht=Object(s.g)((function(e){var t=e.history;return Object(G.jsx)(Ze.a,{position:"static",children:Object(G.jsxs)(pt.a,{children:[Object(G.jsx)(p.a,{variant:"h6",color:"inherit",children:"Social Media"}),Object(G.jsx)(U.b,{to:"/",children:Object(G.jsx)(I.a,{"aria-label":"Home",style:bt(t,"/"),children:Object(G.jsx)(jt.a,{})})}),!g.isAuthenticated()&&Object(G.jsxs)("span",{children:[Object(G.jsx)(U.b,{to:"/signup",children:Object(G.jsx)(S.a,{style:bt(t,"/signup"),children:"Sign up"})}),Object(G.jsx)(U.b,{to:"/signin",children:Object(G.jsx)(S.a,{style:bt(t,"/signin"),children:"Sign In"})})]}),g.isAuthenticated()&&Object(G.jsxs)("span",{children:[Object(G.jsx)(U.b,{to:"/users",children:Object(G.jsx)(S.a,{style:bt(t,"/users"),children:"All Users"})}),Object(G.jsx)(U.b,{to:"/user/"+g.isAuthenticated().user._id,children:Object(G.jsx)(S.a,{style:bt(t,"/user/"+g.isAuthenticated().user._id),children:"My Profile"})}),Object(G.jsx)(S.a,{color:"inherit",onClick:function(){g.clearJWT((function(){return t.push("/")}))},children:"Sign out"})]})]})})})),mt=function(){return Object(G.jsxs)("div",{children:[Object(G.jsx)(ht,{}),Object(G.jsxs)(s.d,{children:[Object(G.jsx)(s.b,{exact:!0,path:"/",component:Te}),Object(G.jsx)(s.b,{path:"/users",component:Fe}),Object(G.jsx)(s.b,{path:"/signup",component:He}),Object(G.jsx)(s.b,{path:"/signin",component:Re}),Object(G.jsx)(ut,{path:"/user/edit/:userId",component:qe}),Object(G.jsx)(s.b,{path:"/user/:userId",component:it})]})]})},Ot=n(100),xt=Object(Ot.a)({}),ft=n(194);n(128);var gt=function(){return Object(r.useEffect)((function(){document.title="Social Media"}),[]),Object(G.jsx)(U.a,{children:Object(G.jsx)(ft.a,{theme:xt,children:Object(G.jsx)(mt,{})})})},vt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,201)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(G.jsx)(a.a.StrictMode,{children:Object(G.jsx)(gt,{})}),document.getElementById("root")),vt()}},[[129,1,2]]]);
//# sourceMappingURL=main.e69cf9d1.chunk.js.map